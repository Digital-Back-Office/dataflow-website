---
import { getEntry } from 'astro:content'
import FeatureCard from './FeatureCard.astro'
import PlanDetailCard from './PlanDetailCard.astro'
import PlanDetailCard2 from './PlanDetailCard2.astro'
const Data = await getEntry('pricing', 'pricing')
const pricing = await getEntry('pricing', 'plancost')
const pricingdata = JSON.stringify(pricing.data)
const data = Data.data
const owncloudplan1 = data.owncloudplan.plan1
const owncloudplan2 = data.owncloudplan.plan2
const owncloudplan3 = data.owncloudplan.plan3
const datacloudplan1 = data.datacloudplans.plan1
const datacloudplan2 = data.datacloudplans.plan2
const planfeature1 = data.table1
const planfeature2 = data.table2
---

<astro-greet data-message={pricingdata}> </astro-greet>
<div
  class='py-24 max-sm:py-16 w-full flex flex-col items-center justify-center'
>
  <h1
    class='text-9calc font-bold text-textblack text-center px-3 w-3/5 max-sm:w-full leading-tight'
  >
    {data.title}
  </h1>
  <p
    class='text-2xl max-sm:text-sm max-sm:mt-2 text-textblack mt-[0px] text-center'
  >
    {data.description}
  </p>
  <div class='flex justify-center items-center gap-x-5 mt-10 toggle-container'>
    <p class='text-lg text-textblack font-bold'>{data.hostown}</p>
    <label class='switch'>
      <input class='toggle' type='checkbox' />
      <span class='slider round'></span>
    </label>
    <p class='text-lg text-textblack font-bold'>{data.hostdata}</p>
  </div>
  <div class='price1 flex flex-wrap justify-center gap-10 my-20'>
    <div
      class='w-[380px] max-sm:w-[90%] min-h-[1000px] rounded-3xl drop-shadow-[0_15px_20px_rgba(0,0,0,0.1)] bg-[#F6F8FA]'
    >
      <div
        class='w-full min-h-[270px] bg-white rounded-t-3xl p-4 flex flex-col items-center height-auto pt-[28px]'
      >
        <p class='text-xl font-bold text-textblack mb-2'>
          {owncloudplan1.planname}
        </p>
        <p class='text-sm text-textblack w-3/5 text-center mb-4'>
          {owncloudplan1.slogan}
        </p>
        <div class='flex items-start my-[8px]'>
          <p class='currency-symbol text-xl text-[#57606A] leading-none pr-1'>
            $
          </p>
          <p class='cost1 text-8calc font-bold text-textblack leading-none'>
            {owncloudplan1.cost}
          </p>
        </div>
        <p class='text-textblack font-medium text-md mb-5'>
          {owncloudplan1.duration}
        </p>
        <button
          class='w-full h-[50px] border-solid border-2 rounded-md hover:opacity-80 my-[10px]'
        >
          <p class='text-textblack font-normal text-md'>
            {owncloudplan1.button}
          </p>
        </button>
      </div>
      <div class='w-full bg-[#F6F8FA] h-[700px] rounded-3xl p-4 height-auto'>
        <FeatureCard feature={owncloudplan1.feature_1} />
        <FeatureCard feature={owncloudplan1.feature_2} />
        <FeatureCard feature={owncloudplan1.feature_3} />
        <FeatureCard
          feature={owncloudplan1.feature_4}
          apps={owncloudplan1.apps}
        />
        <FeatureCard feature={owncloudplan1.feature_5} />
        <FeatureCard feature={owncloudplan1.feature_6} />
        <FeatureCard feature={owncloudplan1.feature_7} />
        <FeatureCard feature={owncloudplan1.feature_8} />
      </div>
    </div>
    <div
      class='w-[380px] max-sm:w-[90%] min-h-[1050px] bg-primary border-b-8 border-x-8 max-sm:border-b-4 max-sm:border-x-4 border-solid border-primary rounded-3xl drop-shadow-[0_15px_20px_rgba(0,0,0,0.1)] -translate-y-4 overflow-hidden height-auto'
    >
      <div class='w-full flex justify-center bg-primary'>
        <div class='py-[8px]'>
          <p class='text-base font-semibold text-white tracking-wider'>
            {owncloudplan2.suggestion}
          </p>
        </div>
      </div>
      <div
        class='w-full min-h-[290px] p-3 pt-6 pb-3 flex flex-col bg-white rounded-t-2xl items-center height-auto'
      >
        <p class='text-2xl font-bold text-textblack mb-2'>
          {owncloudplan2.planname}
        </p>
        <p class='text-sm leading-snug text-textblack w-4/5 text-center mb-4'>
          {owncloudplan2.slogan}
        </p>
        <div class='flex items-start my-[8px]'>
          <p class='currency-symbol text-xl text-[#57606A] leading-none pr-1'>
            $
          </p>
          <p class='cost2 text-8calc font-bold text-textblack leading-none'>
            {owncloudplan2.cost}
          </p>
        </div>
        <p class='text-textblack font-medium text-md mb-5'>
          {owncloudplan2.duration}
        </p>
        <button
          class='w-full h-[50px] bg-primary border-primary border-solid border-2 rounded-md hover:opacity-95 my-[10px]'
        >
          <p class='text-white text-md'>
            {owncloudplan1.button}
          </p>
        </button>
      </div>
      <div class='w-full bg-[#F6F8FA] h-[750px] p-4'>
        <FeatureCard feature={owncloudplan2.feature_1} />
        <FeatureCard feature={owncloudplan2.feature_2} />
        <FeatureCard feature={owncloudplan2.feature_3} />
        <FeatureCard
          feature={owncloudplan2.feature_4}
          apps={owncloudplan2.apps}
        />
        <FeatureCard feature={owncloudplan2.feature_5} />
        <FeatureCard feature={owncloudplan2.feature_6} />
        <FeatureCard feature={owncloudplan2.feature_7} />
        <FeatureCard feature={owncloudplan2.feature_8} />
      </div>
    </div>
    <div
      class='w-[380px] max-sm:w-[90%] min-h-[1000px] rounded-3xl drop-shadow-[0_15px_20px_rgba(0,0,0,0.1)] overflow-hidden height-auto'
    >
      <div class='w-full flex justify-end bg-white'>
        <div
          class='px-[31px] py-[3px] bg-[#FDC700] rounded-tr-3xl rounded-bl-3xl'
        >
          <p class='text-sm font-semibold text-[#fff] tracking-wide'>
            {owncloudplan3.suggestion}
          </p>
        </div>
      </div>
      <div
        class='w-full min-h-[270px] bg-white p-3 flex flex-col items-center height-auto'
      >
        <p class='text-2xl font-bold text-textblack mb-2'>
          {owncloudplan3.planname}
        </p>
        <p class='text-sm leading-snug text-textblack w-1/2 text-center mb-4'>
          {owncloudplan3.slogan}
        </p>
        <div class='flex items-start my-[8px]'>
          <p class='currency-symbol text-xl text-[#57606A] leading-none pr-1'>
            $
          </p>
          <p class='cost3 text-8calc font-bold text-textblack leading-none'>
            {owncloudplan3.cost}
          </p>
        </div>
        <p class='text-textblack font-medium text-md mb-5'>
          {owncloudplan3.duration}
        </p>
        <button
          class='w-full h-[50px] bg-primary border-primary border-solid border-2 rounded-md hover:opacity-80 my-[10px]'
        >
          <p class='text-white text-md'>
            {owncloudplan2.button}
          </p>
        </button>
      </div>
      <div class='w-full bg-[#F6F8FA] h-[700px] p-4 height-auto'>
        <FeatureCard feature={owncloudplan3.feature_1} />
        <FeatureCard feature={owncloudplan3.feature_2} />
        <FeatureCard feature={owncloudplan3.feature_3} />
        <FeatureCard
          feature={owncloudplan3.feature_4}
          apps={owncloudplan3.apps}
        />
        <FeatureCard feature={owncloudplan3.feature_5} />
        <FeatureCard feature={owncloudplan3.feature_6} />
        <FeatureCard feature={owncloudplan3.feature_7} />
        <FeatureCard feature={owncloudplan3.feature_8} />
        <FeatureCard feature={owncloudplan3.feature_9} />
        <FeatureCard feature={owncloudplan3.feature_10} />
        <FeatureCard feature={owncloudplan3.feature_11} />
      </div>
    </div>
  </div>
  <div
    class='container-price2 price2 flex flex-wrap justify-center gap-10 my-20 hidden'
  >
    <div
      class='w-[400px] h-[1000px] rounded-3xl drop-shadow-[0_15px_20px_rgba(0,0,0,0.1)] overflow-hidden bg-[#F6F8FA]'
    >
      <div
        class='w-full min-h-[270px] p-3 pt-7 flex flex-col items-center bg-white'
      >
        <p class='text-3xl font-bold text-textblack mb-2'>
          {datacloudplan1.planname}
        </p>
        <p class='text-sm text-textblack w-3/5 text-center mb-4'>
          {datacloudplan1.slogan}
        </p>
        <div class='flex items-start my-[8px]'>
          <p class='currency-symbol text-xl text-[#57606A] leading-none pr-1'>
            $
          </p>
          <p class='text-8calc font-bold text-textblack leading-none'>
            {datacloudplan1.cost}
          </p>
        </div>
        <p class='text-textblack font-medium text-md mb-5'>
          {datacloudplan1.duration}
        </p>
        <button
          class='w-full h-[50px] border-solid border-2 rounded-md hover:opacity-80 my-[10px]'
        >
          <p class='text-textblack font-normal text-md'>
            {owncloudplan1.button}
          </p>
        </button>
      </div>
      <div class='w-full bg-[#F6F8FA] h-[700px] p-4 height-auto'>
        <FeatureCard feature={datacloudplan1.feature1} />
        <FeatureCard feature={datacloudplan1.feature2} />
        <FeatureCard feature={datacloudplan1.feature3} />
        <FeatureCard feature={datacloudplan1.feature4} />
      </div>
    </div>
    <div
      class='w-[400px] h-[1000px] rounded-3xl shadow-2xl overflow-hidden height-auto'
    >
      <div class='w-full flex justify-end'>
        <div
          class='px-[31px] py-[3px] bg-[#FFD700] rounded-tr-3xl rounded-bl-3xl'
        >
          <p class='text-base font-bold text-white'>
            {datacloudplan2.suggestion}
          </p>
        </div>
      </div>
      <div class='w-full h-[270px] p-3 flex flex-col items-center height-auto'>
        <p class='text-3xl font-bold text-textblack mb-2'>
          {datacloudplan2.planname}
        </p>
        <p class='text-base text-textblack w-3/5 text-center mb-4'>
          {datacloudplan2.slogan}
        </p>
        <p class='text-textblack font-medium text-base text-center mb-6'>
          {datacloudplan2.message}
        </p>
        <button
          class='w-full h-[50px] bg-primary border-primary border-solid border-2 rounded-md hover:opacity-80 my-[10px]'
        >
          <p class='text-white text-md'>
            {owncloudplan2.button}
          </p>
        </button>
      </div>
      <div class='w-full bg-[#F6F8FA] h-[700px] p-4 height-auto'>
        <FeatureCard feature={datacloudplan2.feature1} />
        <FeatureCard feature={datacloudplan2.feature2} />
        <FeatureCard feature={datacloudplan2.feature3} />
        <FeatureCard feature={datacloudplan2.feature4} />
        <FeatureCard feature={datacloudplan2.feature5} />
        <FeatureCard feature={datacloudplan2.feature6} />
        <FeatureCard feature={datacloudplan2.feature7} />
        <FeatureCard feature={datacloudplan2.feature8} />
        <FeatureCard feature={datacloudplan2.feature9} />
        <FeatureCard feature={datacloudplan2.feature10} />
        <FeatureCard feature={datacloudplan2.feature11} />
        <p class='text-[17px] text-textblack font-bold mb-4'>
          {datacloudplan2.addonshead}
        </p>
        <FeatureCard feature={datacloudplan2.addon1} />
      </div>
    </div>
  </div>
  <div class='pb-20'>
    <p class='text-calc font-bold text-textblack text-center px-10'>
      {data.heading}
    </p>
  </div>
  <div
    class='pricetable1 relative w-4/5 flex flex-col justify-center items-center width95 rounded-[30px] border-[#E6E9F5] border overflow-hidden'
  >
    <div class='w-full flex bg-[#EEF2F6] '>
      <div
        class='tablehead1 w-1/4 h-[150px] max-sm:h-[120px] flex flex-col justify-center px-5'
      >
        <p class='text-2xl max-sm:text-lg font-bold text-textblack mb-2'>
          {planfeature1.tablehead1.title}
        </p>
        <p class='text-xs leading-snug text-textblack'>
          {planfeature1.tablehead1.description}
        </p>
      </div>
      <div
        class='planstatus w-1/4 h-[150px] max-sm:h-[120px] flex flex-col items-center justify-between p-5 max-sm:p-0 py-6 max-sm:w-full'
      >
        <p class='text-0calc font-bold text-black mb-2 '>
          {planfeature1.tablehead2.cost}
        </p>
        <button
          class='w-full py-2 max-sm:py-[4px] bg-primary rounded-md hover:opacity-90'
        >
          <p
            class='text-white font-medium text-base max-sm:text-xs max-sm:text-semibold'
          >
            {planfeature1.tablehead2.button}
          </p>
        </button>
      </div>
      <div
        class='planstatus w-1/4 h-[150px] flex flex-col items-center justify-between max-sm:h-[120px] p-5 py-6 max-sm:p-0'
      >
        <p class='font-bold text-calc'>
          <span class='currency-symbol'>$</span><span class='cost2'
            >{planfeature1.tablehead3.cost}</span
          ><span
            class='text-base max-sm:text-xs text-gray-500 font-normal mt-2'
          >
            {planfeature1.tablehead3.duration}</span
          >
        </p>
        <button
          class='w-full py-2 max-sm:py-[4px] bg-primary rounded-md hover:opacity-90'
        >
          <p
            class='text-white font-medium text-base max-sm:text-xs max-sm:text-semibold'
          >
            {planfeature1.tablehead3.button}
          </p>
        </button>
      </div>
      <div
        class='planstatus w-1/4 h-[150px] max-sm:h-[120px] flex flex-col items-center justify-between p-5 py-6'
      >
        <p class='font-bold text-calc'>
          <span class='currency-symbol'>$</span><span class='cost3'
            >{planfeature1.tablehead3.cost}</span
          ><span
            class='text-base max-sm:text-xs text-gray-500 font-normal mt-2'
          >
            {planfeature1.tablehead3.duration}</span
          >
        </p>
        <button
          class='w-full py-2 max-sm:py-[4px] bg-primary rounded-md hover:opacity-90'
        >
          <p class='text-white font-medium text-base max-sm:text-xs'>
            {planfeature1.tablehead3.button}
          </p>
        </button>
      </div>
    </div>
    <PlanDetailCard
      title={planfeature1.feature_1}
      option1='yes'
      option2='yes'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_2}
      option1='yes'
      option2='yes'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_3}
      option1='yes'
      option2='yes'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_4}
      option1='yes'
      option2='yes'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_5}
      option1='Standard Support'
      option2='Premium Support'
      option3='24/7 Dedicated Support'
    />
    <PlanDetailCard
      title={planfeature1.feature_6}
      option1='yes'
      option2='yes'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_7}
      option1='yes'
      option2='yes'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_8}
      option1='yes'
      option2='yes'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_9}
      option1='no'
      option2='no'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_10}
      option1='no'
      option2='no'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_11}
      option1='no'
      option2='no'
      option3='yes'
    />
    <PlanDetailCard
      title={planfeature1.feature_12}
      option1='no'
      option2='48hrs'
      option3='30min'
    />
  </div>
  <div class='pricetable2 w-full flex flex-col items-center hidden'>
    <div class='w-4/5 flex justify-center plancontainer bg-[#EEF2F6]'>
      <div
        class='tablehead1 w-1/4 h-[150px] border border-solid border-[#E6E9F5] flex flex-col justify-center px-5 width95'
      >
        <p class='text-xl font-bold text-textblack mb-2'>
          {planfeature2.tablehead1.title}
        </p>
        <p class='text-base text-textblack'>
          {planfeature2.tablehead1.description}
        </p>
      </div>
      <div
        class='planstatus w-1/4 h-[150px] border border-solid border-[#E6E9F5] flex flex-col items-center justify-between p-5 py-6 planstatus2'
      >
        <p
          class='text-0calc font-bold text-textblack mb-2'
          style='font-family: Roboto;'
        >
          {planfeature2.tablehead2.cost}
        </p>
        <button class='w-full py-2 bg-primary rounded-md hover:opacity-90'>
          <p class='text-white font-bold text-base'>
            {planfeature2.tablehead2.button}
          </p>
        </button>
      </div>
      <div
        class='planstatus2 w-1/4 h-[150px] border border-solid border-[#E6E9F5] flex flex-col items-center justify-between p-5 py-6 planstatus2'
      >
        <p class='font-bold text-0calc' style='font-family: Roboto;'>
          {planfeature2.tablehead3.cost}
        </p>
        <button class='w-full py-2 bg-primary rounded-md hover:opacity-90'>
          <p class='text-white font-bold text-base'>
            {planfeature2.tablehead3.button}
          </p>
        </button>
      </div>
    </div>
    <PlanDetailCard2
      title={planfeature2.feature1}
      option1='yes'
      option2='yes'
    />
    <PlanDetailCard2
      title={planfeature2.feature2}
      option1='yes'
      option2='yes'
    />
    <PlanDetailCard2
      title={planfeature2.feature3}
      option1='yes'
      option2='yes'
    />
    <PlanDetailCard2
      title={planfeature2.feature4}
      option1='yes'
      option2='yes'
    />
    <PlanDetailCard2 title={planfeature2.feature5} option1='no' option2='yes' />
    <PlanDetailCard2 title={planfeature2.feature6} option1='no' option2='yes' />
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const checkbox = document.querySelector('.toggle') as HTMLInputElement
    const price1 = document.querySelector('.price1') as HTMLElement
    const price2 = document.querySelector('.price2') as HTMLElement
    const pricetable1 = document.querySelector('.pricetable1') as HTMLElement
    const pricetable2 = document.querySelector('.pricetable2') as HTMLElement

    checkbox.addEventListener('change', function () {
      if (checkbox.checked === true) {
        price1.classList.add('hidden')
        price2.classList.remove('hidden')
        pricetable1.classList.add('hidden')
        pricetable2.classList.remove('hidden')
      } else {
        price1.classList.remove('hidden')
        price2.classList.add('hidden')
        pricetable1.classList.remove('hidden')
        pricetable2.classList.add('hidden')
      }
    })
    let pricing
    class AstroGreet extends HTMLElement {
      constructor() {
        super()
        const message = this.dataset.message
        pricing = JSON.parse(message)
      }
    }
    customElements.define('astro-greet', AstroGreet)
    async function fetchGeolocation() {
      try {
        const response = await fetch('https://ipinfo.io/json')
        const data = await response.json()
        const country = data.country

        console.log(country)
        const euroCountries = [
          'AT',
          'BE',
          'HR',
          'CY',
          'EE',
          'FI',
          'FR',
          'DE',
          'GR',
          'IE',
          'IT',
          'LV',
          'LT',
          'LU',
          'MT',
          'NL',
          'PT',
          'SK',
          'SI',
          'ES',
          'SE'
        ]

        let price
        if (country == 'GB' || country == 'UK') {
          price = '£'
          const elements = document.querySelectorAll('.cost2')
          elements.forEach((element) => {
            ;(element as HTMLElement).innerText = pricing.pricing.UK.standard
          })
          const elements2 = document.querySelectorAll('.cost3')
          elements2.forEach((element) => {
            ;(element as HTMLElement).innerText = pricing.pricing.UK.premium
          })
        } else if (euroCountries.includes(country)) {
          const elements = document.querySelectorAll('.cost2')
          elements.forEach((element) => {
            ;(element as HTMLElement).innerText = pricing.pricing.EU.standard
          })
          const elements2 = document.querySelectorAll('.cost3')
          elements2.forEach((element) => {
            ;(element as HTMLElement).innerText = pricing.pricing.EU.premium
          })
          price = '€'
        } else {
          const elements = document.querySelectorAll('.cost2')
          elements.forEach((element) => {
            ;(element as HTMLElement).innerText = pricing.pricing.US.standard
          })
          const elements2 = document.querySelectorAll('.cost3')
          elements2.forEach((element) => {
            ;(element as HTMLElement).innerText = pricing.pricing.US.premium
          })
          price = '$'
        }
        const elements = document.querySelectorAll('.currency-symbol')
        elements.forEach((element) => {
          ;(element as HTMLElement).innerText = price
        })
      } catch (error) {}
    }

    fetchGeolocation()
  })
</script>
<style>
  .switch {
    position: relative;
    display: inline-block;
    width: 53px;
    height: 23px;
    border: 2px solid #30baba;
    border-radius: 16px;
  }

  .switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: white;
    -webkit-transition: 0.1s;
    transition: 0.1s;
  }

  .slider:before {
    position: absolute;
    content: '';
    height: 16px;
    width: 16px;
    left: 2px;
    top: 2px;
    background-color: #30baba;
    -webkit-transition: 0.1s;
    transition: 0.1s;
  }

  input:checked + .slider {
    background-color: white;
  }

  input:focus + .slider {
    box-shadow: 0 0 1px white;
  }

  input:checked + .slider:before {
    -webkit-transform: translateX(28px);
    -ms-transform: translateX(28px);
    transform: translateX(28px);
  }

  .slider.round {
    border-radius: 34px;
  }

  .slider.round:before {
    border-radius: 50%;
  }

  @media (max-width: 600px) {
    .container-price1 {
      width: 100%;
      padding-left: 15px;
      padding-right: 15px;
      padding-top: 30px;
      padding-bottom: 30px;
    }
    .container-price2 {
      width: 100%;
      padding-left: 15px;
      padding-right: 15px;
      padding-top: 30px;
      padding-bottom: 30px;
    }
    .text-container1 {
      width: 100%;
      margin-bottom: 40px;
      padding: 20px;
      text-align: center;
    }
    .toggle-container {
      flex-direction: column;
    }
    .img-container {
      width: 100%;
      height: auto;
    }
    .pricelistfeature {
      width: 90%;
    }
    .planstatus {
      padding: 10px;
      padding-left: 20px;
      width: 33.3%;
    }
    .planstatus2 {
      padding: 10px;
      padding-left: 20px;
      width: 45%;
    }

    .plancontainer {
      flex-wrap: wrap;
      align-items: center;
      width: 100%;
    }
    .tablehead1 {
      display: none;
    }
    .tablehead {
      border-radius: 0;
      padding: 5px;
    }
    .height-auto {
      height: auto;
    }

    .width95 {
      width: 90%;
    }
  }
</style>
